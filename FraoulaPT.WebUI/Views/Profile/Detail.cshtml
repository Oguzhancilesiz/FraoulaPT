@using Microsoft.AspNetCore.Html
@{
    ViewData["Title"] = "Profilim";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model FraoulaPT.DTOs.UserProfileDTOs.UserProfileDetailDTO

<div class="container py-5">
    <div class="card shadow-lg border-0 rounded-3"
         style="background-color: rgba(25,25,25,0.95); color: #f1f1f1;">
        <div class="card-body">
            <!-- Profil Fotoğrafı ve Ad -->
            <div class="text-center mb-4">
                <img src="@Model.ProfilePhotoUrl"
                     alt="Profil Fotoğrafı"
                     class="rounded-circle border border-3 shadow-sm"
                     style="border-color: #ff8800 !important; width:140px; height:140px; object-fit: cover; background:#111;" />

                <h3 class="mt-3 fw-bold text-warning">@* @Model.FullName *@ Ad soyad gelecek </h3>

                @if (!string.IsNullOrWhiteSpace(Model.Instagram))
                {
                    <a href="https://instagram.com/@Model.Instagram" target="_blank"
                       class="text-light opacity-75 text-decoration-none d-inline-flex align-items-center mt-1">
                        <i class="bi bi-instagram me-1"></i> @Model.Instagram
                    </a>
                }
            </div>

            <hr class="border-secondary mb-4" />

            <!-- Bilgiler -->
            <div class="row g-3">
                <div class="col-12 col-md-6">@InfoCard("bi-gender-ambiguous", "Cinsiyet", Model.Gender?.ToString())</div>
                <div class="col-12 col-md-6">@InfoCard("bi-calendar3", "Doğum Tarihi", Model.BirthDate?.ToString("dd.MM.yyyy"))</div>
                <div class="col-12 col-md-6">@InfoCard("bi-rulers", "Boy / Kilo", $"{Model.HeightCm} cm / {Model.WeightKg} kg")</div>
                <div class="col-12 col-md-6">@InfoCard("bi-body-text", "Vücut Tipi", Model.BodyType?.ToString())</div>
                <div class="col-12 col-md-6">@InfoCard("bi-droplet-half", "Kan Grubu", Model.BloodType?.ToString())</div>
                <div class="col-12 col-md-6">@InfoCard("bi-telephone", "Telefon", Model.PhoneNumber)</div>
                <div class="col-12">@InfoCard("bi-geo-alt", "Adres", Model.Address)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-person-lines-fill", "Acil Durum Kişisi", $"{Model.EmergencyContactName} {Model.EmergencyContactPhone}")</div>
                <div class="col-12 col-md-6">@InfoCard("bi-journal-medical", "Medikal Geçmiş", Model.MedicalHistory)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-activity", "Kronik Hastalıklar", Model.ChronicDiseases)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-capsule", "Sürekli İlaçlar", Model.CurrentMedications)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-allergies", "Alerjiler", Model.Allergies)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-bandaid", "Geçmiş Yaralanmalar", Model.PastInjuries)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-emoji-frown", "Mevcut Ağrılar", Model.CurrentPain)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-gender-female", "Hamilelik Durumu", Model.PregnancyStatus == true ? "Evet" : "Hayır")</div>
                <div class="col-12 col-md-6">@InfoCard("bi-heart-pulse", "Sağlık Kontrolü", Model.LastCheckResults)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-cup-straw", "Sigara / Alkol", Model.SmokingAlcohol)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-briefcase", "Meslek", Model.Occupation)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-award", "Deneyim", Model.ExperienceLevel?.ToString())</div>
                <div class="col-12 col-md-6">@InfoCard("bi-trophy", "Favori Sporlar", Model.FavoriteSports)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-pencil", "Notlar", Model.Notes)</div>
                <div class="col-12 col-md-6">@InfoCard("bi-egg-fried", "Diyet Tipi", Model.DietType?.ToString())</div>
                <div class="col-12 col-md-6">@InfoCard("bi-clock-history", "Oluşturulma Tarihi", Model.CreatedDate.ToString("dd.MM.yyyy HH:mm"))</div>
            </div>

            <!-- Düzenle Butonu -->
            <div class="mt-4 text-end">
                <a asp-action="Edit" asp-controller="Profile"
                   class="btn fw-semibold text-white px-4"
                   style="background: linear-gradient(90deg, #ff8800, #cc6600); border: none;">
                    <i class="bi bi-pencil-square me-1"></i> Profili Düzenle
                </a>
            </div>
        </div>
    </div>
</div>
@functions {
    private IHtmlContent InfoCard(string icon, string title, string value)
    {
        var html = $@"
            <div class='p-3 rounded shadow-sm h-100 d-flex align-items-start' style='background-color: rgba(40,40,40,0.9); border-left: 4px solid #ff8800;'>
                             <i class='bi {icon} text-warning fs-4 me-2'></i>
                <div>
                    <small class='text-light opacity-75'>{title}</small>
                    <div class='fw-semibold text-white'>{(string.IsNullOrWhiteSpace(value) ? '-' : value)}</div>
                </div>
            </div>";
        return new HtmlString(html);
    }
}
